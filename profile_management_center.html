<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Management Center - HO Safety Management</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fhosafety6270back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.9"></script>
  <script type="module" src="https://static.rocket.new/rocket-shot.js?v=0.0.1"></script>
  </head>
<body class="bg-background min-h-screen">
    <!-- Fixed Header -->
    <header class="bg-surface shadow-sm border-b border-border fixed top-0 left-0 right-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo and Title -->
                <div class="flex items-center space-x-3">
                    <div class="flex-shrink-0">
                        <svg class="h-8 w-8 text-primary" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-semibold text-text-primary">HO Safety Management</h1>
                        <p class="text-sm text-text-secondary">Profile Management</p>
                    </div>
                </div>

                <!-- Header Actions -->
                <div class="flex items-center space-x-4">
                    <!-- Quick Actions -->
                    <div class="hidden md:flex items-center space-x-2">
                        <button onclick="window.location.href='safety_reports_management.html'" 
                                class="btn-secondary text-sm px-3 py-2" title="Create Report (Ctrl+R)">
                            <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                            </svg>
                            Report
                        </button>
                        <button onclick="window.location.href='alert_broadcasting_system.html'" 
                                class="btn-primary text-sm px-3 py-2" title="Send Alert (Ctrl+A)">
                            <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                            </svg>
                            Alert
                        </button>
                    </div>

                    <!-- Notifications -->
                    <div class="relative">
                        <button class="relative p-2 text-text-secondary hover:text-text-primary transition-micro rounded-lg hover:bg-gray-100">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                            </svg>
                            <span class="absolute -top-1 -right-1 bg-error text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">3</span>
                        </button>
                    </div>

                    <!-- User Role Indicator -->
                    <div class="flex items-center space-x-2">
                        <div class="hidden sm:block text-right">
                            <p class="text-sm font-medium text-text-primary">Sarah Johnson</p>
                            <p class="text-xs text-text-secondary">Safety Manager</p>
                        </div>
                        <img src="https://images.unsplash.com/photo-1592831383329-23d79a212006" 
                             alt="Sarah Johnson profile picture" 
                             class="h-8 w-8 rounded-full object-cover"
                             onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;">
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pt-16 pb-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <!-- Page Title and Status -->
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-semibold text-text-primary">Profile Management Center</h2>
                    <p class="text-text-secondary mt-1">Account administration and security controls</p>
                </div>
                <div class="flex items-center space-x-2 text-sm">
                    <div class="flex items-center text-success">
                        <div class="w-2 h-2 bg-success rounded-full mr-2"></div>
                        <span>LDAP Sync Active</span>
                    </div>
                    <span class="text-text-secondary">• Last sync: 5 min ago</span>
                </div>
            </div>

            <!-- Profile Header Card -->
            <div class="card p-6 mb-6">
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <img src="https://images.unsplash.com/photo-1587403655231-b1734312903f" 
                             alt="Sarah Johnson professional headshot" 
                             class="h-20 w-20 rounded-full object-cover border-4 border-primary-100"
                             onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;">
                        <button class="absolute bottom-0 right-0 bg-primary text-white p-1 rounded-full hover:bg-primary-700 transition-micro">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-semibold text-text-primary">Sarah Johnson</h3>
                        <p class="text-text-secondary">Safety Manager • Employee ID: SM-2024-001</p>
                        <div class="flex items-center mt-2 space-x-4">
                            <span class="status-indicator status-success">Active</span>
                            <span class="text-sm text-text-secondary">Member since: Jan 2024</span>
                            <span class="text-sm text-text-secondary">Last login: Oct 21, 2025 2:06 PM</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button onclick="handleSecureLogout()" class="btn-secondary text-sm px-4 py-2">
                            <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                            </svg>
                            Secure Logout
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tabbed Interface -->
            <div class="card">
                <!-- Tab Navigation -->
                <div class="border-b border-border">
                    <nav class="flex space-x-8 px-6" aria-label="Profile tabs">
                        <button onclick="switchTab('personal')" 
                                class="tab-button active py-4 px-1 border-b-2 font-medium text-sm transition-micro" 
                                id="personal-tab">
                            <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                            Personal Information
                        </button>
                        <button onclick="switchTab('security')" 
                                class="tab-button py-4 px-1 border-b-2 font-medium text-sm transition-micro" 
                                id="security-tab">
                            <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                            </svg>
                            Security Settings
                        </button>
                        <button onclick="switchTab('notifications')" 
                                class="tab-button py-4 px-1 border-b-2 font-medium text-sm transition-micro" 
                                id="notifications-tab">
                            <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                            </svg>
                            Notifications
                        </button>
                        <button onclick="switchTab('audit')" 
                                class="tab-button py-4 px-1 border-b-2 font-medium text-sm transition-micro" 
                                id="audit-tab">
                            <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            Audit Trail
                        </button>
                    </nav>
                </div>

                <!-- Tab Content -->
                <div class="p-6">
                    <!-- Personal Information Tab -->
                    <div id="personal-content" class="tab-content">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Contact Information -->
                            <div>
                                <h4 class="text-lg font-semibold text-text-primary mb-4">Contact Information</h4>
                                <form class="space-y-4" onsubmit="handlePersonalInfoUpdate(event)">
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary mb-1">Full Name</label>
                                        <input type="text" value="Sarah Johnson" 
                                               class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary mb-1">Email Address</label>
                                        <input type="email" value="sarah.johnson@company.com" 
                                               class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary mb-1">Phone Number</label>
                                        <input type="tel" value="+1 (555) 123-4567" 
                                               class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary mb-1">Department</label>
                                        <select class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                            <option>Safety Management</option>
                                            <option>Operations</option>
                                            <option>Administration</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn-primary w-full">
                                        Update Contact Information
                                    </button>
                                </form>
                            </div>

                            <!-- Role & Permissions -->
                            <div>
                                <h4 class="text-lg font-semibold text-text-primary mb-4">Role & Permissions</h4>
                                <div class="space-y-4">
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-medium text-text-primary">Current Role</span>
                                            <span class="status-indicator status-success">Safety Manager</span>
                                        </div>
                                        <p class="text-sm text-text-secondary">Full access to safety reports, team management, and alert broadcasting</p>
                                    </div>
                                    
                                    <div>
                                        <h5 class="font-medium text-text-primary mb-2">Site Access Permissions</h5>
                                        <div class="space-y-2">
                                            <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                                                <span class="text-sm">Site A-12 (Manufacturing)</span>
                                                <span class="text-xs text-success">Full Access</span>
                                            </div>
                                            <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                                                <span class="text-sm">Site B-07 (Warehouse)</span>
                                                <span class="text-xs text-success">Full Access</span>
                                            </div>
                                            <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                                                <span class="text-sm">Site C-03 (Office)</span>
                                                <span class="text-xs text-success">Full Access</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div>
                                        <h5 class="font-medium text-text-primary mb-2">Emergency Contact</h5>
                                        <div class="space-y-2">
                                            <input type="text" placeholder="Emergency Contact Name" value="Michael Johnson" 
                                                   class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                            <input type="tel" placeholder="Emergency Contact Phone" value="+1 (555) 987-6543" 
                                                   class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Settings Tab -->
                    <div id="security-content" class="tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Password Management -->
                            <div>
                                <h4 class="text-lg font-semibold text-text-primary mb-4">Password Management</h4>
                                <form class="space-y-4" onsubmit="handlePasswordChange(event)">
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary mb-1">Current Password</label>
                                        <input type="password" 
                                               class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary mb-1">New Password</label>
                                        <input type="password" id="new-password" oninput="checkPasswordStrength(this.value)"
                                               class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                        <div class="mt-2">
                                            <div class="flex items-center space-x-2">
                                                <div class="flex-1 bg-gray-200 rounded-full h-2">
                                                    <div id="password-strength-bar" class="h-2 rounded-full transition-smooth bg-gray-300" style="width: 0%"></div>
                                                </div>
                                                <span id="password-strength-text" class="text-xs text-text-secondary">Enter password</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary mb-1">Confirm New Password</label>
                                        <input type="password" 
                                               class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <button type="submit" class="btn-primary w-full">
                                        Update Password
                                    </button>
                                </form>

                                <!-- Two-Factor Authentication -->
                                <div class="mt-6 pt-6 border-t border-border">
                                    <h5 class="font-medium text-text-primary mb-3">Two-Factor Authentication</h5>
                                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                        <div>
                                            <p class="font-medium text-text-primary">2FA Status</p>
                                            <p class="text-sm text-text-secondary">Add an extra layer of security</p>
                                        </div>
                                        <button onclick="toggle2FA()" class="btn-secondary text-sm px-4 py-2">
                                            Enable 2FA
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Session Management -->
                            <div>
                                <h4 class="text-lg font-semibold text-text-primary mb-4">Session Management</h4>
                                <div class="space-y-4">
                                    <div>
                                        <h5 class="font-medium text-text-primary mb-2">Active Sessions</h5>
                                        <div class="space-y-2">
                                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                                <div>
                                                    <p class="font-medium text-text-primary">Current Session</p>
                                                    <p class="text-sm text-text-secondary">Chrome on Windows • 192.168.1.100</p>
                                                    <p class="text-xs text-text-secondary">Active now</p>
                                                </div>
                                                <span class="status-indicator status-success">Current</span>
                                            </div>
                                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                                <div>
                                                    <p class="font-medium text-text-primary">Mobile Session</p>
                                                    <p class="text-sm text-text-secondary">Safari on iPhone • 192.168.1.105</p>
                                                    <p class="text-xs text-text-secondary">2 hours ago</p>
                                                </div>
                                                <button class="text-error hover:text-error-700 text-sm font-medium">
                                                    Revoke
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div>
                                        <h5 class="font-medium text-text-primary mb-2">Auto-Timeout Settings</h5>
                                        <select class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                            <option>15 minutes</option>
                                            <option selected>30 minutes</option>
                                            <option>1 hour</option>
                                            <option>2 hours</option>
                                            <option>Never</option>
                                        </select>
                                    </div>

                                    <div class="pt-4 border-t border-border">
                                        <button onclick="revokeAllSessions()" class="btn-secondary w-full">
                                            <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                                            </svg>
                                            Revoke All Other Sessions
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notifications Tab -->
                    <div id="notifications-content" class="tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Alert Preferences -->
                            <div>
                                <h4 class="text-lg font-semibold text-text-primary mb-4">Alert Preferences</h4>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                        <div>
                                            <p class="font-medium text-text-primary">Critical Safety Alerts</p>
                                            <p class="text-sm text-text-secondary">High-priority incidents requiring immediate attention</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>

                                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                        <div>
                                            <p class="font-medium text-text-primary">Report Status Updates</p>
                                            <p class="text-sm text-text-secondary">Notifications when reports are updated or resolved</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>

                                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                        <div>
                                            <p class="font-medium text-text-primary">Team Activity</p>
                                            <p class="text-sm text-text-secondary">Updates from supervisors and team members</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>

                                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                        <div>
                                            <p class="font-medium text-text-primary">System Maintenance</p>
                                            <p class="text-sm text-text-secondary">Scheduled maintenance and system updates</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Delivery Methods & Schedule -->
                            <div>
                                <h4 class="text-lg font-semibold text-text-primary mb-4">Delivery Methods</h4>
                                <div class="space-y-4">
                                    <div>
                                        <h5 class="font-medium text-text-primary mb-2">Notification Channels</h5>
                                        <div class="space-y-2">
                                            <label class="flex items-center">
                                                <input type="checkbox" checked class="rounded border-border text-primary focus:ring-primary">
                                                <span class="ml-2 text-sm text-text-primary">Email Notifications</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" checked class="rounded border-border text-primary focus:ring-primary">
                                                <span class="ml-2 text-sm text-text-primary">SMS Alerts</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" class="rounded border-border text-primary focus:ring-primary">
                                                <span class="ml-2 text-sm text-text-primary">Push Notifications</span>
                                            </label>
                                        </div>
                                    </div>

                                    <div>
                                        <h5 class="font-medium text-text-primary mb-2">Quiet Hours</h5>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-medium text-text-primary mb-1">Start Time</label>
                                                <input type="time" value="22:00" 
                                                       class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-text-primary mb-1">End Time</label>
                                                <input type="time" value="07:00" 
                                                       class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                            </div>
                                        </div>
                                        <p class="text-xs text-text-secondary mt-1">Critical alerts will still be delivered during quiet hours</p>
                                    </div>

                                    <div>
                                        <h5 class="font-medium text-text-primary mb-2">Escalation Rules</h5>
                                        <select class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                                            <option>Immediate escalation for critical alerts</option>
                                            <option selected>15-minute delay for high priority</option>
                                            <option>30-minute delay for medium priority</option>
                                            <option>No escalation</option>
                                        </select>
                                    </div>

                                    <button onclick="saveNotificationSettings()" class="btn-primary w-full">
                                        Save Notification Settings
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Audit Trail Tab -->
                    <div id="audit-content" class="tab-content hidden">
                        <div class="mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-lg font-semibold text-text-primary">Activity Audit Trail</h4>
                                <div class="flex items-center space-x-2">
                                    <select class="text-sm border border-border rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option>All Actions</option>
                                        <option>Login/Logout</option>
                                        <option>Profile Changes</option>
                                        <option>Security Events</option>
                                        <option>Report Actions</option>
                                    </select>
                                    <input type="date" value="2025-10-21" 
                                           class="text-sm border border-border rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-primary">
                                    <button onclick="exportAuditLog()" class="btn-secondary text-sm px-3 py-1">
                                        Export
                                    </button>
                                </div>
                            </div>

                            <!-- Audit Log Entries -->
                            <div class="space-y-3">
                                <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
                                    <div class="flex-shrink-0">
                                        <div class="w-8 h-8 bg-success-100 rounded-full flex items-center justify-center">
                                            <svg class="w-4 h-4 text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-text-primary">Successful Login</p>
                                        <p class="text-sm text-text-secondary">User logged in from Chrome browser</p>
                                        <div class="flex items-center mt-1 text-xs text-text-secondary space-x-4">
                                            <span>Oct 21, 2025 2:06 PM</span>
                                            <span>IP: 192.168.1.100</span>
                                            <span>Session: sess_abc123</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
                                    <div class="flex-shrink-0">
                                        <div class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center">
                                            <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-text-primary">Profile Updated</p>
                                        <p class="text-sm text-text-secondary">Emergency contact information modified</p>
                                        <div class="flex items-center mt-1 text-xs text-text-secondary space-x-4">
                                            <span>Oct 21, 2025 1:45 PM</span>
                                            <span>IP: 192.168.1.100</span>
                                            <span>Changes: Emergency Phone</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
                                    <div class="flex-shrink-0">
                                        <div class="w-8 h-8 bg-warning-100 rounded-full flex items-center justify-center">
                                            <svg class="w-4 h-4 text-warning" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-text-primary">Password Change Attempt</p>
                                        <p class="text-sm text-text-secondary">Failed password change - incorrect current password</p>
                                        <div class="flex items-center mt-1 text-xs text-text-secondary space-x-4">
                                            <span>Oct 21, 2025 11:30 AM</span>
                                            <span>IP: 192.168.1.100</span>
                                            <span>Status: Failed</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
                                    <div class="flex-shrink-0">
                                        <div class="w-8 h-8 bg-secondary-100 rounded-full flex items-center justify-center">
                                            <svg class="w-4 h-4 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-text-primary">Report Created</p>
                                        <p class="text-sm text-text-secondary">Safety report SR-2025-0156 created for Site A-12</p>
                                        <div class="flex items-center mt-1 text-xs text-text-secondary space-x-4">
                                            <span>Oct 21, 2025 9:15 AM</span>
                                            <span>IP: 192.168.1.105</span>
                                            <span>Report ID: SR-2025-0156</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-lg">
                                    <div class="flex-shrink-0">
                                        <div class="w-8 h-8 bg-accent-100 rounded-full flex items-center justify-center">
                                            <svg class="w-4 h-4 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"/>
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-text-primary">Alert Broadcast</p>
                                        <p class="text-sm text-text-secondary">Critical safety alert sent to all supervisors</p>
                                        <div class="flex items-center mt-1 text-xs text-text-secondary space-x-4">
                                            <span>Oct 20, 2025 4:22 PM</span>
                                            <span>IP: 192.168.1.100</span>
                                            <span>Recipients: 18</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Load More -->
                            <div class="text-center mt-6">
                                <button onclick="loadMoreAuditEntries()" class="btn-secondary">
                                    Load More Entries
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Settings Card -->
            <div class="card p-6 mt-6">
                <h3 class="text-lg font-semibold text-text-primary mb-4">Advanced Settings</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-1">Language</label>
                        <select class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                            <option selected>English (US)</option>
                            <option>English (UK)</option>
                            <option>Spanish</option>
                            <option>French</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-1">Timezone</label>
                        <select class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                            <option selected>Eastern Time (ET)</option>
                            <option>Central Time (CT)</option>
                            <option>Mountain Time (MT)</option>
                            <option>Pacific Time (PT)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-1">Date Format</label>
                        <select class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                            <option selected>MM/DD/YYYY</option>
                            <option>DD/MM/YYYY</option>
                            <option>YYYY-MM-DD</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-1">Export Format</label>
                        <select class="w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                            <option selected>CSV</option>
                            <option>Excel</option>
                            <option>PDF</option>
                            <option>JSON</option>
                        </select>
                    </div>
                </div>
                <div class="mt-4 pt-4 border-t border-border">
                    <button onclick="saveAdvancedSettings()" class="btn-primary">
                        Save Advanced Settings
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Fixed Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-surface border-t border-border z-40">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-around h-16">
                <a href="ho_safety_dashboard.html" class="flex flex-col items-center space-y-1 text-text-secondary hover:text-primary transition-micro">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                    </svg>
                    <span class="text-xs font-medium">Dashboard</span>
                </a>
                <a href="safety_reports_management.html" class="flex flex-col items-center space-y-1 text-text-secondary hover:text-primary transition-micro">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    <span class="text-xs font-medium">Reports</span>
                </a>
                <a href="team_management_interface.html" class="flex flex-col items-center space-y-1 text-text-secondary hover:text-primary transition-micro">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                    </svg>
                    <span class="text-xs font-medium">Teams</span>
                </a>
                <a href="alert_broadcasting_system.html" class="flex flex-col items-center space-y-1 text-text-secondary hover:text-primary transition-micro relative">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                    </svg>
                    <span class="absolute -top-1 -right-1 bg-error text-white text-xs rounded-full h-4 w-4 flex items-center justify-center">3</span>
                    <span class="text-xs font-medium">Alerts</span>
                </a>
                <a href="profile_management_center.html" class="flex flex-col items-center space-y-1 text-primary">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                    <span class="text-xs font-medium">Profile</span>
                </a>
            </div>
        </div>
    </nav>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.add('hidden'));
            
            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('active', 'border-primary', 'text-primary');
                button.classList.add('border-transparent', 'text-text-secondary');
            });
            
            // Show selected tab content
            document.getElementById(tabName + '-content').classList.remove('hidden');
            
            // Add active class to selected tab button
            const activeButton = document.getElementById(tabName + '-tab');
            activeButton.classList.add('active', 'border-primary', 'text-primary');
            activeButton.classList.remove('border-transparent', 'text-text-secondary');
        }

        // Password strength checker
        function checkPasswordStrength(password) {
            const strengthBar = document.getElementById('password-strength-bar');
            const strengthText = document.getElementById('password-strength-text');
            
            let strength = 0;
            let feedback = '';
            
            if (password.length >= 8) strength += 25;
            if (/[a-z]/.test(password)) strength += 25;
            if (/[A-Z]/.test(password)) strength += 25;
            if (/[0-9]/.test(password)) strength += 25;
            
            strengthBar.style.width = strength + '%';
            
            if (strength === 0) {
                strengthBar.className = 'h-2 rounded-full transition-smooth bg-gray-300';
                feedback = 'Enter password';
            } else if (strength <= 25) {
                strengthBar.className = 'h-2 rounded-full transition-smooth bg-error';
                feedback = 'Weak';
            } else if (strength <= 50) {
                strengthBar.className = 'h-2 rounded-full transition-smooth bg-warning';
                feedback = 'Fair';
            } else if (strength <= 75) {
                strengthBar.className = 'h-2 rounded-full transition-smooth bg-primary';
                feedback = 'Good';
            } else {
                strengthBar.className = 'h-2 rounded-full transition-smooth bg-success';
                feedback = 'Strong';
            }
            
            strengthText.textContent = feedback;
        }

        // Form submission handlers
        function handlePersonalInfoUpdate(event) {
            event.preventDefault();
            showNotification('Personal information updated successfully', 'success');
        }

        function handlePasswordChange(event) {
            event.preventDefault();
            showNotification('Password updated successfully', 'success');
        }

        function handleSecureLogout() {
            if (confirm('Are you sure you want to logout? This will end your session and clear all data.')) {
                showNotification('Logging out securely...', 'info');
                setTimeout(() => {
                    window.location.href = 'ho_safety_dashboard.html';
                }, 2000);
            }
        }

        // Settings handlers
        function toggle2FA() {
            showNotification('2FA setup initiated. Check your email for instructions.', 'info');
        }

        function revokeAllSessions() {
            if (confirm('This will log you out from all other devices. Continue?')) {
                showNotification('All other sessions have been revoked', 'success');
            }
        }

        function saveNotificationSettings() {
            showNotification('Notification preferences saved successfully', 'success');
        }

        function saveAdvancedSettings() {
            showNotification('Advanced settings saved successfully', 'success');
        }

        function exportAuditLog() {
            showNotification('Audit log export initiated. Download will start shortly.', 'info');
        }

        function loadMoreAuditEntries() {
            showNotification('Loading more audit entries...', 'info');
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg transition-smooth ${
                type === 'success' ? 'bg-success text-white' :
                type === 'error' ? 'bg-error text-white' :
                type === 'warning' ? 'bg-warning text-white' :
                'bg-primary text-white'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey) {
                switch(e.key) {
                    case 'r':
                        e.preventDefault();
                        window.location.href = 'safety_reports_management.html';
                        break;
                    case 'a':
                        e.preventDefault();
                        window.location.href = 'alert_broadcasting_system.html';
                        break;
                    case '1':
                        e.preventDefault();
                        switchTab('personal');
                        break;
                    case '2':
                        e.preventDefault();
                        switchTab('security');
                        break;
                    case '3':
                        e.preventDefault();
                        switchTab('notifications');
                        break;
                    case '4':
                        e.preventDefault();
                        switchTab('audit');
                        break;
                }
            }
        });

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Set default tab
            switchTab('personal');
            
            // Add fade-in animation to cards
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.3s ease-out';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>